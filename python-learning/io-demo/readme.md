# 1. 文件的读写

磁盘上读写文件的功能都是由操作系统提供的，操作系统不允许普通的程序直接操作磁盘。
请求操作系统打开一个文件对象（通常称为文件描述符），通过操作系统提供的接口从这个文件对象中读取数据（读文件），把数据写入这个文件对象（写文件）。

  - 打开文件：open()，获取一个文件对象。
  - 读取文件内容：通过 read()、readline()、readlines()等来获取文件中的内容。
  - 处理文件内容：对读取到的内容进行进一步的处理（例如解析、分析、修改等）。
  - 关闭文件： close() 方法关闭文件，以释放系统资源。


## 1.1 open() 打开文件

如果文件不存在，open()函数就会抛出一个IOError的错误
打开文件的模式：

  - 'r'：只读模式（默认），文件必须存在。
  - 'w'：写模式，文件不存在时会创建，文件存在时会覆盖内容。
  - 'a'：追加模式，文件不存在时会创建，文件存在时会在末尾追加内容。
  - 'b'：二进制模式，适用于处理非文本文件（如图片、音频等）。
  - 'r+'：读写模式，文件必须存在。


## 1.2 with 自动管理文件的打开和关闭

文件在退出 with 语句块时自动关闭，可以避免忘记关闭文件，它会在代码块执行完毕后自动关闭文件，哪怕发生异常。当然也可以使用 try ... finally。


## 1.3 逐行读取大文件

大文件读取调用 read() 会读取文件全部内容到内存中，可能导致内存不足。此时，可以反复调用read(size)方法，可以使用 for 循环逐行读取文件，避免一次性读取全部内容。

  - 小文件，read()一次性读取；
  - 不确定文件大小，反复调用read(size)比较保险；
  - 配置文件，调用readlines()最方便


## 1.4 读取二进制文件

python 默认读取到的文本文件都是UTF-8，要读取二进制文件，比如图片、视频等，用'rb'模式打开文件


## 1.5 读取文件指定字符编码

open()函数传入参数encoding，指定文件的字符编码。如果文件不是UTF-8编码，需要指定encoding参数，否则会出现UnicodeDecodeError。

当文本文件中夹杂了一些非法编码的字符，可能会遇到UnicodeDecodeError。open()可接收一个errors参数，表示发生编码错误后的处理方式。最简单的处理方式是直接忽略错误的字符。


## 1.6 写文件

调用open()函数时，传入标识符'w'或者'wb'表示写文本文件或写二进制文件：
  写文件时，操作系统会先将数据是放到内存缓存起来，空闲的时候再慢慢写入。只有调用 close() 时，未写入的数据才会被保证写入磁盘。
  如果忘记调用 close()，可能导致数据丢失。


# 2. StringIO 和 BytesIO

StringIO 和 BytesIO 可在内存中操作 str 和 bytes


# 3. os 模块操作文件和目录

操作系统提供了 dir、cd、cp、ls 等命令来操作文件和目录，而在Python中内置的os模块就可以直接调用操作系统提供的接口函数。


# 4. 序列化、反序列化

序列化是指将对象转换为字节流，以便在网络上传输或存储到磁盘上。反序列化是指将字节流转换回对象。

## 4.1 Python 的 pickle模块可实现序列化

Python的序列化过程称为 pickling 序列化后的内容可写入磁盘，或者在网络上传输。把变量内容从序列化的对象重新读到内存里称之为反序列化 unpickling


# 5. JSON 的序列化与反序列化

Python内置的json模块提供了对象和JSON的转换
序列化对象，序列化对象需要自定义序列化和反序列化的函数
